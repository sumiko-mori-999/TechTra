import json
import urllib.request

def lambda_handler(event, context):
    # TODO implement
    post_slack()
    return {
        'statusCode': 200,
        'body': json.dumps('Hello from Lambda!')
    }

def post_slack():
    message = """
    昨日のランチは、何食べましたか？
    1. お米系
    2. 麺モノ
    3. パン系
    """
    
    send_data = {
        "username": "smori-bot",
        "icon_emoji": ":feet:",
        "text": message,
    }
    
    send_text = "payload=" + json.dumps(send_data)
    
    request = urllib.request.Request(
        "https://hooks.slack.com/services/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",
        data=send_text.encode('utf-8'),
        method="POST"
    )
    with urllib.request.urlopen(request) as response:
        response_body = response.read().decode('utf-8')
